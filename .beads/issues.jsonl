{"id":"swift-package-generator-based-on-openapi-08g","title":"Write tests for Op3: nullable to 3.1 format","description":"Write pytest tests for Op3 transformation. Test cases: (1) nullable:true in OpenAPI \u003c3.1.0 converted to 3.1 format (oneOf or type array), (2) check OpenAPI version detection, (3) handle different type combinations. Research which nullability pattern Swift OpenAPIGenerator prefers. TDD approach.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:46.454803+01:00","updated_at":"2025-12-12T19:02:16.14082+01:00","closed_at":"2025-12-12T19:02:16.14082+01:00"}
{"id":"swift-package-generator-based-on-openapi-1o2","title":"Implement writer.py for JSON/YAML output","description":"Implement src/bootstrapper/core/writer.py with write_spec(data: dict, path: Path, format: FileFormat) function. Must write to openapi.yaml or openapi.json matching original format. CRITICAL: Configure PyYAML to avoid creating aliases/anchors that Swift parser doesn't support. See plan section 5.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T18:07:45.181271+01:00","updated_at":"2025-12-12T18:34:14.752055+01:00","closed_at":"2025-12-12T18:34:14.752055+01:00"}
{"id":"swift-package-generator-based-on-openapi-1wo","title":"Implement Swift package scaffolding (swift.py)","description":"Implement src/bootstrapper/generators/swift.py using subprocess.run. (1) Check for Package.swift, (2) If missing: generate Package.swift via Jinja2 template with all deps (OpenAPI runtime, AsyncHTTPClient, etc) instead of running swift package add-dependency commands, (3) Create Sources/{Name}Types and Sources/{Name}Client dirs, (4) Run swift-openapi-generator. See plan section 5.4.2.","notes":"swift.py implementation complete with 36 passing tests. Package structure creation, generation and scaffolding fully implemented. Also created Package.swift.j2 template with all dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:48.589898+01:00","updated_at":"2025-12-12T20:48:47.359636+01:00","closed_at":"2025-12-12T20:48:47.35964+01:00"}
{"id":"swift-package-generator-based-on-openapi-2p8","title":"Setup project structure with uv and dependencies","description":"Initialize Python project using uv. Create directory structure per plan (src/bootstrapper with core/, transformers/, generators/, resources/ subdirs). Install dependencies: Typer, Rich, PyYAML, Jinja2, Pydantic. Setup pyproject.toml, add Ruff and Pytest. See history/initial_plan.md sections 2-4.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T18:07:44.778468+01:00","updated_at":"2025-12-12T18:28:04.106595+01:00","closed_at":"2025-12-12T18:28:04.106595+01:00"}
{"id":"swift-package-generator-based-on-openapi-7js","title":"Implement Op5: clean required array transformer","description":"Implement src/bootstrapper/transformers/op5_clean_required.py. Logic: For each Schema Object, get properties keys and required array. Filter required to only include keys that exist in properties: [k for k in required if k in properties]. Needs parent context from walker. Must pass tests from dim. See plan section 5.3 Operation 5.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:47.593884+01:00","updated_at":"2025-12-12T19:07:48.117585+01:00","closed_at":"2025-12-12T19:07:48.117585+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-7js","depends_on_id":"swift-package-generator-based-on-openapi-dim","type":"blocks","created_at":"2025-12-12T18:10:31.839312+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-7js","depends_on_id":"swift-package-generator-based-on-openapi-dhi","type":"blocks","created_at":"2025-12-12T18:10:31.88473+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-7x1","title":"Add CLI reporting for initial Swift file creation (optional)","description":"Update the CLI output in src/bootstrapper/main.py to report when initial Swift files are created during bootstrapping.\n\n## Context\nThis is an optional enhancement to provide user feedback when Swift files are created. It improves the user experience by showing what the tool is doing.\n\n## Implementation\nIn main.py, after the call to ensure_package_structure(), add:\n\n```python\n# Report Swift file creation\nif any([\n    structure_results.get(\"types_file\"),\n    structure_results.get(\"client_file\"),\n    structure_results.get(\"tests_file\")\n]):\n    console.print(\"[bold green]✓[/bold green] Created initial Swift files\")\n```\n\n## Location\nAdd this reporting after ensure_package_structure() is called but before other status messages.\n\n## User Experience\nWhen running swift-bootstrapper for the first time:\n```\n✓ Package.swift generated\n✓ Created initial Swift files          ← NEW\n✓ Created configuration files\n...\n```\n\nOn subsequent runs (files already exist):\n```\n✓ Package.swift exists\n✓ Created configuration files\n...\n```\n\nThe message only appears when at least one Swift file is created (not on updates where files already exist).\n\n## Alternative Messages (Choose One)\n- \"Created initial Swift files\" (simple)\n- \"Created placeholder Swift files for targets\" (descriptive)\n- \"Generated initial Swift files to satisfy SPM\" (technical)\n\nRecommend: \"Created initial Swift files\" for brevity.\n\n## Testing\nManually test:\n1. Bootstrap a new project - verify message appears\n2. Re-run bootstrap - verify message doesn't appear\n3. Delete one Swift file and re-run - verify message appears\n\n## File to Modify\n- src/bootstrapper/main.py\n\n## Priority\nPriority 2 (nice to have) - this is purely cosmetic and doesn't affect functionality.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-13T14:50:57.346051+01:00","updated_at":"2025-12-13T14:50:57.346051+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-7x1","depends_on_id":"swift-package-generator-based-on-openapi-9pk","type":"blocks","created_at":"2025-12-13T14:50:57.346821+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-8el","title":"Write tests for Op2: const to enum conversion","description":"Write pytest tests for Op2 transformation. Test cases: (1) const value is converted to enum array with single value, (2) const key is removed, (3) works with string/number/boolean const values. Use OpenAPI schema snippets. TDD approach - write tests first.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:46.020577+01:00","updated_at":"2025-12-12T18:59:58.561238+01:00","closed_at":"2025-12-12T18:59:58.561238+01:00"}
{"id":"swift-package-generator-based-on-openapi-8ta","title":"Implement Op4: format byte to contentEncoding","description":"Implement src/bootstrapper/transformers/op4_format_fix.py. Logic: Check OpenAPI version \u003e=3.1.0, find {type:string, format:byte}, replace with {type:string, contentEncoding:base64}. Handles OpenAPI 3.1 spec compliance. Must pass tests from hc8. See plan section 5.3 Operation 4.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:47.135156+01:00","updated_at":"2025-12-12T19:05:09.750656+01:00","closed_at":"2025-12-12T19:05:09.750656+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-8ta","depends_on_id":"swift-package-generator-based-on-openapi-hc8","type":"blocks","created_at":"2025-12-12T18:10:31.656886+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-8ta","depends_on_id":"swift-package-generator-based-on-openapi-dhi","type":"blocks","created_at":"2025-12-12T18:10:31.702361+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-9pk","title":"Integrate create_initial_swift_files() into ensure_package_structure()","description":"Modify the ensure_package_structure() function in src/bootstrapper/generators/swift.py to call create_initial_swift_files() and include the results in its return dict.\n\n## Context\nAfter creating the target directories, we need to create initial Swift files before the .gitkeep files. This ensures swift build succeeds before code generation.\n\n## Current Flow (lines 14-72)\n1. Create Package.swift if doesn't exist\n2. Create directories (Types, Client, Tests)\n3. Create .gitkeep files\n4. Return results\n\n## New Flow\n1. Create Package.swift if doesn't exist\n2. Create directories (Types, Client, Tests)\n3. **Create initial Swift files (NEW)**\n4. Create .gitkeep files (can coexist with Swift files)\n5. Return enhanced results\n\n## Implementation\nAdd after line 63 (after directories are created):\n\n```python\n# Create initial Swift files to satisfy Swift Package Manager\nswift_file_results = create_initial_swift_files(target_dir, project_name)\nresults.update(swift_file_results)\n```\n\nThe .gitkeep creation logic can remain unchanged - .gitkeep files can coexist with Swift files.\n\n## Updated Return Type\nThe function should now return a dict with these keys:\n```python\n{\n    \"package_swift\": bool,\n    \"types_dir\": bool,\n    \"client_dir\": bool,\n    \"tests_dir\": bool,\n    \"types_file\": bool,      # NEW\n    \"client_file\": bool,     # NEW\n    \"tests_file\": bool,      # NEW\n}\n```\n\n## Update Docstring\nUpdate the docstring's Returns section to document the three new keys in the return dict.\n\n## File to Modify\n- src/bootstrapper/generators/swift.py (modify ensure_package_structure() function at line 14)\n\n## Testing\nAfter implementation, verify:\n1. Swift files are created when running ensure_package_structure()\n2. Return dict includes the new keys\n3. swift build succeeds with just the initial files (before code generation)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T14:50:22.228481+01:00","updated_at":"2025-12-13T14:50:22.228481+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-9pk","depends_on_id":"swift-package-generator-based-on-openapi-tfp","type":"blocks","created_at":"2025-12-13T14:50:22.229153+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-ae3","title":"Implement Op1: null anyOf removal transformer","description":"Implement src/bootstrapper/transformers/op1_null_anyof.py. Logic: Find all 'anyOf' arrays, remove {type: null} entries, unwrap anyOf if only 1 item remains, remove 'default: null' if type no longer nullable. Use ops_base recursive_walk. Must pass all tests from issue zve. See plan section 5.3 Operation 1.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:45.799525+01:00","updated_at":"2025-12-12T18:58:27.014679+01:00","closed_at":"2025-12-12T18:58:27.014679+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-ae3","depends_on_id":"swift-package-generator-based-on-openapi-zve","type":"blocks","created_at":"2025-12-12T18:10:31.081522+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-ae3","depends_on_id":"swift-package-generator-based-on-openapi-dhi","type":"blocks","created_at":"2025-12-12T18:10:31.135299+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-bi5","title":"Implement template rendering system","description":"Implement src/bootstrapper/generators/templates.py using Jinja2 to render config files. Load templates from resources/, render with context (project name, etc), write to target directory only if files don't exist (preserve user edits on updates). See plan section 5.4.1.","notes":"Implemented template rendering system with comprehensive test suite covering all functions and edge cases. All 38 tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:48.326244+01:00","updated_at":"2025-12-12T20:11:22.36067+01:00","closed_at":"2025-12-12T20:11:22.36067+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-bi5","depends_on_id":"swift-package-generator-based-on-openapi-d3i","type":"blocks","created_at":"2025-12-12T18:10:32.353961+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-d16","title":"Implement main CLI with Typer","description":"Implement src/bootstrapper/main.py as Typer CLI entry point. Command: 'bootstrap [target_dir]'. Workflow: (1) Init rich.console, (2) Find original_openapi.yaml/json, (3) Call transformers.manager.process_spec(), (4) Call generators.swift.ensure_package_structure(), (5) Call generators.swift.run_generator(). Beautiful terminal output with spinners/checkmarks. See plan sections 5.1 and 8, user manual section 2-4.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:48.83962+01:00","updated_at":"2025-12-12T21:21:38.786861+01:00","closed_at":"2025-12-12T21:21:38.786861+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-d16","depends_on_id":"swift-package-generator-based-on-openapi-dut","type":"blocks","created_at":"2025-12-12T18:10:32.497076+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-d16","depends_on_id":"swift-package-generator-based-on-openapi-1wo","type":"blocks","created_at":"2025-12-12T18:10:32.541154+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-d16","depends_on_id":"swift-package-generator-based-on-openapi-bi5","type":"blocks","created_at":"2025-12-12T18:10:32.58568+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-d16","depends_on_id":"swift-package-generator-based-on-openapi-pbj","type":"blocks","created_at":"2025-12-12T18:10:32.629629+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-d16","depends_on_id":"swift-package-generator-based-on-openapi-1o2","type":"blocks","created_at":"2025-12-12T18:10:32.673338+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-d3i","title":"Create Jinja2 templates for all config files","description":"Create Jinja2 templates in src/bootstrapper/resources/: (1) Makefile.j2 with swift run commands, (2) .gitignore.j2, (3) .env.example.j2 for API keys, (4) openapi-generator-config.yaml.j2 for Types+Client configs, (5) overlay.yaml.j2 minimal empty overlay. Use template variables for project name. See plan sections 5.4.1 and 6.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:48.076594+01:00","updated_at":"2025-12-12T19:33:03.539199+01:00","closed_at":"2025-12-12T19:33:03.539199+01:00"}
{"id":"swift-package-generator-based-on-openapi-dhi","title":"Implement ops_base.py recursive walker","description":"Implement src/bootstrapper/transformers/ops_base.py with recursive_walk(data, transform_func, parent=None, key_in_parent=None) helper. Must traverse all dict/list structures in OpenAPI spec, calling transform_func at each node. Handle in-place modifications. This is the foundation for all transformation operations. See plan section 5.3 and code snippet in section 9.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T18:07:45.380194+01:00","updated_at":"2025-12-12T18:34:40.281159+01:00","closed_at":"2025-12-12T18:34:40.281159+01:00"}
{"id":"swift-package-generator-based-on-openapi-dim","title":"Write tests for Op5: clean required array","description":"Write pytest tests for Op5 transformation. Test cases: (1) required array filtered to only include keys in properties, (2) nonexistent properties removed from required, (3) empty required array handled, (4) nested schema objects processed. TDD approach.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:47.364595+01:00","updated_at":"2025-12-12T19:06:01.42666+01:00","closed_at":"2025-12-12T19:06:01.42666+01:00"}
{"id":"swift-package-generator-based-on-openapi-dut","title":"Implement transformation manager to orchestrate operations","description":"Implement src/bootstrapper/transformers/manager.py to orchestrate all operations. Chain ops: spec = load() -\u003e Op1.apply() -\u003e Op2.apply() -\u003e Op3.apply() -\u003e Op4.apply() -\u003e Op5.apply() -\u003e save(). Coordinate the full transformation pipeline. See plan section 5.3 manager.py.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:47.834632+01:00","updated_at":"2025-12-12T19:26:50.406677+01:00","closed_at":"2025-12-12T19:26:50.406677+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-dut","depends_on_id":"swift-package-generator-based-on-openapi-ae3","type":"blocks","created_at":"2025-12-12T18:10:32.036899+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-dut","depends_on_id":"swift-package-generator-based-on-openapi-ek8","type":"blocks","created_at":"2025-12-12T18:10:32.08151+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-dut","depends_on_id":"swift-package-generator-based-on-openapi-r44","type":"blocks","created_at":"2025-12-12T18:10:32.125282+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-dut","depends_on_id":"swift-package-generator-based-on-openapi-8ta","type":"blocks","created_at":"2025-12-12T18:10:32.169752+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-dut","depends_on_id":"swift-package-generator-based-on-openapi-7js","type":"blocks","created_at":"2025-12-12T18:10:32.213907+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-ek8","title":"Implement Op2: const to enum conversion","description":"Implement src/bootstrapper/transformers/op2_const_enum.py. Logic: Find all 'const' keys, capture the value, remove 'const', add 'enum: [value]'. Handles Swift OpenAPIGenerator compatibility. Use ops_base walker. Must pass tests from 8el. See plan section 5.3 Operation 2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:46.237264+01:00","updated_at":"2025-12-12T19:00:53.559604+01:00","closed_at":"2025-12-12T19:00:53.559604+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-ek8","depends_on_id":"swift-package-generator-based-on-openapi-8el","type":"blocks","created_at":"2025-12-12T18:10:31.289802+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-ek8","depends_on_id":"swift-package-generator-based-on-openapi-dhi","type":"blocks","created_at":"2025-12-12T18:10:31.340212+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-hc8","title":"Write tests for Op4: format byte to contentEncoding","description":"Write pytest tests for Op4 transformation. Test cases: (1) {type:string, format:byte} converted to {type:string, contentEncoding:base64} for OpenAPI 3.1+, (2) version check works, (3) format key removed after conversion. Use OpenAPI 3.1 spec examples. TDD approach.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:46.906029+01:00","updated_at":"2025-12-12T19:04:17.537775+01:00","closed_at":"2025-12-12T19:04:17.537775+01:00"}
{"id":"swift-package-generator-based-on-openapi-j4y","title":"Add Package.swift Jinja2 template","description":"Create src/bootstrapper/resources/Package.swift.j2 template with all Swift dependencies (OpenAPI runtime, AsyncHTTPClient, etc). This template will be used by swift.py to generate Package.swift with proper target structure (Types and Client). See plan section 5.4.2 and section 6.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T19:34:12.243616+01:00","updated_at":"2025-12-12T20:55:21.578737+01:00","closed_at":"2025-12-12T20:55:21.578737+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-j4y","depends_on_id":"swift-package-generator-based-on-openapi-1wo","type":"blocks","created_at":"2025-12-12T19:34:12.244294+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-ket","title":"Create Jinja2 templates for initial Swift files","description":"Create three new Jinja2 template files in src/bootstrapper/resources/:\n\n1. TypesFile.swift.j2 - Template for Types target initial file\n2. ClientFile.swift.j2 - Template for Client target initial file  \n3. TestsFile.swift.j2 - Template for Tests target initial file\n\n## Context\nSwift Package Manager requires at least one Swift file in each target. Currently targets only have .gitkeep files, causing swift build to fail before code generation.\n\n## Requirements\n- Files must contain ONLY safe imports (external packages, NO generated code references)\n- Must use {{ project_name }} template variable for target names\n- Include helpful comments explaining purpose and where users can add custom code\n\n## TypesFile.swift.j2 Content:\n```swift\n// {{ project_name }}Types.swift\n// Auto-generated by swift-openapi-bootstrapper\n//\n// Generated types from your OpenAPI spec will be in GeneratedSources/\n// You can add custom type extensions and utilities here.\n\nimport OpenAPIRuntime\n\n// Add your custom type extensions here\n```\n\n## ClientFile.swift.j2 Content:\n```swift\n// {{ project_name }}Client.swift\n// Auto-generated by swift-openapi-bootstrapper\n//\n// Generated client code from your OpenAPI spec will be in GeneratedSources/\n// You can add custom client utilities and helper functions here.\n\nimport OpenAPIRuntime\nimport OpenAPIAsyncHTTPClient\n\n// Add your custom client utilities here\n// After code generation, you can add helper functions that use the generated Client\n```\n\n## TestsFile.swift.j2 Content:\n```swift\n// {{ project_name }}Tests.swift\n// Auto-generated by swift-openapi-bootstrapper\n\nimport Testing\nimport {{ project_name }}Client\nimport UsefulThings\n\n// Add your tests here\n```\n\n## Critical Constraint\nDO NOT import anything from generated code (e.g., Client struct, Types) because swift-openapi-generator builds the package first. Only external package imports are safe.\n\n## Files to Create\n- src/bootstrapper/resources/TypesFile.swift.j2\n- src/bootstrapper/resources/ClientFile.swift.j2\n- src/bootstrapper/resources/TestsFile.swift.j2","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T14:49:26.043316+01:00","updated_at":"2025-12-13T14:49:41.688427+01:00"}
{"id":"swift-package-generator-based-on-openapi-pbj","title":"Implement loader.py for JSON/YAML parsing","description":"Implement src/bootstrapper/core/loader.py with load_spec(path: Path) -\u003e (dict, FileFormat) function. Must detect file extension (.yaml/.json), use yaml.safe_load or json.load appropriately, and return both the parsed dict and a FileFormat enum. Handle both JSON and YAML OpenAPI specs. See plan section 5.2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T18:07:44.979911+01:00","updated_at":"2025-12-12T18:33:32.291988+01:00","closed_at":"2025-12-12T18:33:32.291988+01:00"}
{"id":"swift-package-generator-based-on-openapi-r44","title":"Implement Op3: nullable to 3.1 format transformer","description":"Implement src/bootstrapper/transformers/op3_nullable.py. Logic: Check root openapi version, if \u003c3.1.0 find 'nullable:true', convert to 3.1 style (oneOf or type array with null). Remove nullable key. Use pattern Swift OpenAPIGenerator expects. Must pass tests from 08g. See plan section 5.3 Operation 3.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:46.671324+01:00","updated_at":"2025-12-12T19:03:17.808939+01:00","closed_at":"2025-12-12T19:03:17.808939+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-r44","depends_on_id":"swift-package-generator-based-on-openapi-08g","type":"blocks","created_at":"2025-12-12T18:10:31.478563+01:00","created_by":"daemon"},{"issue_id":"swift-package-generator-based-on-openapi-r44","depends_on_id":"swift-package-generator-based-on-openapi-dhi","type":"blocks","created_at":"2025-12-12T18:10:31.522508+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-smh","title":"Add comprehensive tests for initial Swift file creation","description":"Add comprehensive test cases to tests/test_swift.py to verify the initial Swift file creation functionality.\n\n## Context\nAfter implementing create_initial_swift_files() and integrating it into ensure_package_structure(), we need comprehensive tests to verify the functionality works correctly.\n\n## Test Cases to Implement\n\n### 1. test_initial_swift_files_created\nVerify that Swift files are created with correct names in correct locations:\n- Types file: Sources/{ProjectName}Types/{ProjectName}Types.swift\n- Client file: Sources/{ProjectName}Client/{ProjectName}Client.swift\n- Tests file: Tests/{ProjectName}Tests/{ProjectName}Tests.swift\n\nAssert all three files exist after calling ensure_package_structure().\n\n### 2. test_swift_file_content\nVerify files contain expected content:\n- TypesFile: Contains 'import OpenAPIRuntime' and project_name in header\n- ClientFile: Contains 'import OpenAPIRuntime', 'import OpenAPIAsyncHTTPClient', and project_name\n- TestsFile: Contains 'import Testing', 'import {ProjectName}Client', 'import UsefulThings'\n\nUse render_template() to get expected content and compare.\n\n### 3. test_swift_files_preserved\nVerify preservation behavior:\n1. Run ensure_package_structure() - files created\n2. Modify file contents (simulate user edits)\n3. Run ensure_package_structure() again\n4. Assert files still contain user modifications (not overwritten)\n\n### 4. test_swift_files_allow_build\nVerify swift build succeeds with just initial files (before code generation):\n1. Create a temporary directory\n2. Run ensure_package_structure()\n3. Run swift build (or run_swift_build() function)\n4. Assert build succeeds\n\nNote: May need to skip if swift is not available in test environment.\n\n### 5. test_create_initial_swift_files_return_values\nTest the create_initial_swift_files() function directly:\n1. First call: Returns {\"types_file\": True, \"client_file\": True, \"tests_file\": True}\n2. Second call: Returns {\"types_file\": False, \"client_file\": False, \"tests_file\": False}\n\n### 6. test_ensure_package_structure_return_includes_files\nVerify ensure_package_structure() return dict includes new keys:\n- Assert return dict has \"types_file\", \"client_file\", \"tests_file\" keys\n- Verify values are correct based on whether files were created or existed\n\n## Test Utilities\nUse existing test patterns from test_swift.py:\n- Use pytest fixtures for temporary directories\n- Follow existing naming conventions\n- Use appropriate assertions\n\n## Code Quality\n- Add docstrings to each test explaining what it verifies\n- Use descriptive variable names\n- Follow existing code style in test_swift.py\n\n## File to Modify\n- tests/test_swift.py\n\n## Verification\nRun all tests with:\n```bash\nuv run pytest tests/test_swift.py -v\n```\n\nAll new tests should pass.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T14:50:41.328+01:00","updated_at":"2025-12-13T14:50:41.328+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-smh","depends_on_id":"swift-package-generator-based-on-openapi-9pk","type":"blocks","created_at":"2025-12-13T14:50:41.328683+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-tfp","title":"Add create_initial_swift_files() function to swift.py","description":"Add a new helper function create_initial_swift_files() to src/bootstrapper/generators/swift.py that creates initial Swift files in each target.\n\n## Context\nThis function uses the Jinja2 templates created in the previous task to generate minimal Swift files that satisfy Swift Package Manager's requirement for at least one Swift file per target.\n\n## Function Signature\n```python\ndef create_initial_swift_files(target_dir: Path, project_name: str) -\u003e dict[str, bool]:\n    \"\"\"Create initial Swift files in each target to satisfy SPM.\n\n    Creates minimal placeholder Swift files that allow swift build to succeed\n    before code generation. Files contain only safe imports (no generated code\n    references) and are created once then preserved on updates.\n\n    Args:\n        target_dir: The package root directory\n        project_name: The name of the Swift package\n\n    Returns:\n        Dictionary indicating which files were created:\n        - \"types_file\": True if created, False if existed\n        - \"client_file\": True if created, False if existed\n        - \"tests_file\": True if created, False if existed\n    \"\"\"\n```\n\n## Implementation Requirements\n1. Import render_template and write_if_not_exists from bootstrapper.generators.templates\n2. Create context dict with project_name\n3. For each target (Types, Client, Tests):\n   - Build file path: target_dir / \"Sources\" or \"Tests\" / f\"{project_name}TargetName\" / f\"{project_name}TargetName.swift\"\n   - Render template using render_template()\n   - Write using write_if_not_exists() to preserve user edits\n   - Store result in return dict\n4. Return dict with keys: \"types_file\", \"client_file\", \"tests_file\"\n\n## File Paths Generated\n- Types: Sources/{ProjectName}Types/{ProjectName}Types.swift\n- Client: Sources/{ProjectName}Client/{ProjectName}Client.swift\n- Tests: Tests/{ProjectName}Tests/{ProjectName}Tests.swift\n\n## Templates Used\n- TypesFile.swift.j2\n- ClientFile.swift.j2\n- TestsFile.swift.j2\n\n## Preservation Strategy\nUse write_if_not_exists() so files are created once and never overwritten, allowing users to add custom code safely.\n\n## File to Modify\n- src/bootstrapper/generators/swift.py (add function after line 72, before run_swift_build())","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-13T14:50:07.717691+01:00","updated_at":"2025-12-13T14:50:07.717691+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-tfp","depends_on_id":"swift-package-generator-based-on-openapi-ket","type":"blocks","created_at":"2025-12-13T14:50:07.718469+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-vgu","title":"Write integration tests for full pipeline","description":"Write integration tests in tests/test_integration.py. Test full pipeline: (1) Create test folder with sample broken OpenAPI spec, (2) Run CLI bootstrap command, (3) Verify all files created (Package.swift, openapi.yaml, configs, etc), (4) Verify transformations applied correctly, (5) Test update scenario (re-run with new spec). See plan section 6-7.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-12T18:07:49.104013+01:00","updated_at":"2025-12-12T22:33:27.799189+01:00","closed_at":"2025-12-12T22:33:27.799189+01:00","dependencies":[{"issue_id":"swift-package-generator-based-on-openapi-vgu","depends_on_id":"swift-package-generator-based-on-openapi-d16","type":"blocks","created_at":"2025-12-12T18:10:32.811825+01:00","created_by":"daemon"}]}
{"id":"swift-package-generator-based-on-openapi-zve","title":"Write tests for Op1: null anyOf removal","description":"Write pytest tests for Op1 transformation in tests/test_transformers.py. Test cases: (1) anyOf with type:null is removed, (2) anyOf with 1 item left is unwrapped, (3) default:null is removed when type no longer nullable. Use sample OpenAPI snippets showing before/after. Follow TDD approach - write tests BEFORE implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T18:07:45.592856+01:00","updated_at":"2025-12-12T18:57:24.863775+01:00","closed_at":"2025-12-12T18:57:24.863775+01:00"}
